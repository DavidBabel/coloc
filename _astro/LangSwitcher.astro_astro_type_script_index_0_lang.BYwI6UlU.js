document.addEventListener("DOMContentLoaded",()=>{const i=document.documentElement,u=document.getElementById("main-flags"),g=document.getElementById("mobile-small-plus"),p=document.getElementById("desktop-small-plus");function B(t,n){const o=window.langTranslations;return!o||!o[n]?n:o[n][t]||n}const m=Array.from(document.querySelectorAll("#main-flags button[data-lang]")).map(t=>t.dataset.lang).filter(Boolean),r=i.getAttribute("lang");if(r==="loading"){const t=localStorage.getItem("lang")||"fr";i.setAttribute("lang",t),b(t),h(t)}else r&&(localStorage.setItem("lang",r),b(r),h(r));function L(t){const n=t.substring(0,2).toLowerCase(),o=n==="en"?"gb":n,l=B("lang",t),e=document.createElement("button");e.setAttribute("aria-label",l),e.setAttribute("data-lang",n),e.className="btn btn-ghost p-2 rounded-md w-12 h-9",e.setAttribute("title",l),e.setAttribute("type","button");const a=document.createElement("img");return a.src=`https://flagcdn.com/${o}.svg`,a.alt=l,a.width=32,a.height=24,a.className="block object-cover",e.appendChild(a),e.addEventListener("click",c=>{const s=e.dataset.lang;s&&(i.setAttribute("lang",s),localStorage.setItem("lang",s),b(s),h(s))}),e}function b(t){if(!u)return;let n=localStorage.getItem("bonusLang"),o;if(m.includes(t)?o=n?[...m,n]:m:(n=t,localStorage.setItem("bonusLang",n),o=[...m,n]),u.innerHTML="",o.forEach((l,e)=>{const a=L(l);n&&l===n&&a.classList.add("bonus-flag"),u.appendChild(a)}),n)A();else{const l=v();u.appendChild(l),x()}}function A(){x();const t=S(),n=S();g&&g.appendChild(t),p&&p.appendChild(n)}function x(){g&&(g.innerHTML=""),p&&(p.innerHTML="")}function C(t){const n=t.querySelector('[role="button"]');t.querySelectorAll(".dropdown-lang-btn").forEach(l=>{const e=l.dataset.lang;e&&l.addEventListener("click",a=>{i.setAttribute("lang",e),localStorage.setItem("lang",e),b(e),h(e),n&&n.blur()})})}function S(){const t=document.createElement("div"),n=window.innerWidth<=767;t.className=n?"dropdown dropdown-top dropdown-end":"dropdown dropdown-top";const o=document.createElement("div");o.setAttribute("tabindex","0"),o.setAttribute("role","button"),o.className="w-10 h-10 flex items-center justify-center cursor-pointer rounded-full hover:bg-base-300 transition-colors duration-200";const l=document.createElement("div");l.className="text-base-content text-lg font-bold flex items-center justify-center",l.textContent="+",o.appendChild(l);const e=document.createElement("ul");e.setAttribute("tabindex","0"),e.className="dropdown-content menu bg-base-100 rounded-box z-[100] w-36 p-2 shadow-lg";const a=document.createElement("li");return a.className="px-2 py-1 text-xs text-gray-500 flex items-center gap-1 border-b border-gray-200 mb-1 pointer-events-none",a.innerHTML=`
        <img src="/img/google-translate.svg" alt="Google Translate" width="60" height="60">
        <span>AI translated</span>
      `,e.appendChild(a),document.querySelectorAll("#hidden-dropdown-buttons .dropdown-lang-btn").forEach(s=>{if(s.dataset.lang){const E=document.createElement("li"),f=s.cloneNode(!0);E.appendChild(f),e.appendChild(E)}}),t.appendChild(o),t.appendChild(e),C(t),t}function v(){const t=document.createElement("div"),n=window.innerWidth<=767;t.className=n?"dropdown dropdown-top dropdown-end":"dropdown dropdown-top";const o=document.createElement("div");o.setAttribute("tabindex","0"),o.setAttribute("role","button"),o.className="w-10 h-8 flex items-center justify-center cursor-pointer";const l=document.createElement("div");l.className="w-10 h-6 bg-gray-200 flex items-center justify-center border border-gray-400";const e=document.createElement("span");e.textContent="+",e.className="text-gray-600 text-sm font-bold",l.appendChild(e),o.appendChild(l);const a=document.createElement("ul");a.setAttribute("tabindex","0"),a.className="dropdown-content menu bg-base-100 rounded-box z-[100] w-36 p-2 shadow-lg";const c=document.createElement("li");return c.className="px-2 py-1 text-xs text-gray-500 flex items-center gap-1 border-b border-gray-200 mb-1 pointer-events-none",c.innerHTML=`
        <img src="/img/google-translate.svg" alt="Google Translate" width="60" height="60">
        <span>AI translated</span>
      `,a.appendChild(c),document.querySelectorAll("#hidden-dropdown-buttons .dropdown-lang-btn").forEach(y=>{if(y.dataset.lang){const f=document.createElement("li"),N=y.cloneNode(!0);f.appendChild(N),a.appendChild(f)}}),t.appendChild(o),t.appendChild(a),C(t),t}function h(t){document.querySelectorAll("#lang-switcher button[data-lang], #hidden-dropdown-buttons .dropdown-lang-btn").forEach(o=>{const l=o.dataset.lang===t;o.classList.toggle("selected",l)}),setTimeout(()=>{document.querySelectorAll("#lang-switcher button[data-lang], .dropdown-lang-btn").forEach(l=>{const e=l.dataset.lang===t;l.classList.toggle("selected",e)})},10)}const d=document.querySelector(".overflow-y-auto"),w=document.querySelector(".lang-container-wrapper");if(d&&w){d.addEventListener("scroll",()=>{const n=d.scrollTop,o=d.scrollHeight,l=d.clientHeight,e=n+l<o-10;w.classList.toggle("show-shadow",e)});const t=d.scrollHeight>d.clientHeight;w.classList.toggle("show-shadow",t)}});
